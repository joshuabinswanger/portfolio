---
import SquareBracketH from "./SquareBracket_H.astro";
import "../styles/global.css";
import ImageElement from "./ImageElement.astro";
import ThumbnailElement from "./ThumbnailElement.astro";
---

<div class:list={["fade", "GalleryElementWrapper"]}>
	<div id="ImageWrapper">
		<div id="ImageContainer">
			<ImageElement 
			width="100%"
			to="/projects/alice-in-woodland"
			loading="eager"
			altText="This is a Test"
			imagePath="/src/assets/galleryimages/GalleryImages_1.webp"
			/>
		</div>

		<div id="ImageContainer">
			<ImageElement 
				width="100%"
				to="/projects/alice-in-woodland"
				title="Alice in Woodland"
				tools="3D Interactive"
				altText="This is a Test"
				imagePath="/src/assets/galleryimages/GalleryImages_9.webp"
				/>
			</div>
		
		<div id="ImageContainer">
			<ImageElement  
				width="100%"
				to="/projects/alice-in-woodland"
				title="Alice in Woodland"
				tools="3D Interactive"
				altText="This is a Test"
				imagePath="/src/assets/galleryimages/GalleryImages_8.webp"
				/>
		</div>

		<div id="ImageContainer">
			<ImageElement 
				width="100%"
				to="/projects/alice-in-woodland"
				title="Alice in Woodland"
				tools="3D Interactive"
				altText="This is a Test"
				imagePath="/src/assets/galleryimages/GalleryImages_7.webp"
			/>
		</div>

		<div>
			<ImageElement 
				width="100%"
				to="/projects/alice-in-woodland"
				title="Alice in Woodland"
				tools="3D Interactive"
				altText="This is a Test"
				imagePath="/src/assets/galleryimages/GalleryImages_1.webp"
			/>
		</div>
	</div>
	<div id="ThumbnailWrapper">
		<SquareBracketH>
			<h1>Game Design 101</h1>
			<h2>Poster</h2>
			<h3>Client</h3>
		</SquareBracketH>
		<SquareBracketH>
			<div id="GalleryThumbnails">
				<div id="Thumbnail">
					<ThumbnailElement 
					width="100%"
					aspectratio="1/1"
					to="/projects/alice-in-woodland"
					title="Alice in Woodland"
					tools="3D Interactive"
					altText="This is a Test"
					imagePath="/src/assets/galleryimages/GalleryImages_9.webp"
					/>
				</div>

				<div id="Thumbnail">
					<ThumbnailElement  
					width="100%"
					aspectratio="1/1"
					to="/projects/alice-in-woodland"
					title="Alice in Woodland"
					tools="3D Interactive"
					altText="This is a Test"
					imagePath="/src/assets/galleryimages/GalleryImages_8.webp"
					/>
				</div>

				<div id="Thumbnail">
					<ThumbnailElement 
					width="100%"
					aspectratio="1/1"
					to="/projects/alice-in-woodland"
					title="Alice in Woodland"
					tools="3D Interactive"
					altText="This is a Test"
					imagePath="/src/assets/galleryimages/GalleryImages_7.webp"
					/>
				</div>
				
				<div id="Thumbnail">
					<ThumbnailElement 
					width="100%"
					aspectratio="1/1"
					to="/projects/alice-in-woodland"
					title="Alice in Woodland"
					tools="3D Interactive"
					altText="This is a Test"
					imagePath="/src/assets/galleryimages/GalleryImages_1.webp"
					/>
				</div>
			</div>
		</SquareBracketH>
	</div>

<script>
document.querySelectorAll('#GalleryThumbnails #Thumbnail').forEach(function(thumbnail, index) {
    thumbnail.addEventListener('mouseover', function() {
        document.querySelector(`#ImageWrapper #ImageContainer:nth-child(${index + 2})`).style.opacity = '1';
    });

    thumbnail.addEventListener('mouseout', function() {
        document.querySelector(`#ImageWrapper #ImageContainer:nth-child(${index + 2})`).style.opacity = '0';
    });
});


	

     // IntersectionObserver options
     let options = {
         rootMargin: "800px 0px -200px 0px",
     };
 
     // Define the IntersectionObserver
     const observer = new IntersectionObserver((entries) => {  
         entries.forEach((entry) => {
             console.log(entry);
             if (entry.isIntersecting) {
                 entry.target.classList.add("show");
             } else {
                 entry.target.classList.remove("show");
             }
         });
     }, options);
 
     // Select elements to observe and start observing them
     const fadeElements = document.querySelectorAll(".fade");
     fadeElements.forEach((el) => observer.observe(el));

</script>

<style>

@import "../styles/global.css";

.GalleryElementWrapper {
	display: grid;
}

/* Images Overlapping*/
#ImageWrapper {
	display: grid; /* Parent container needs to be relative */
	grid-template-columns: 1fr;
	grid-template-rows: 1fr;

}

#ImageWrapper > div {
	grid-column: 1;
	grid-row: 1;
	transition: opacity 0.3s ease;
}

#ImageWrapper > div:nth-of-type(2) {
opacity: 0;
}

#ImageWrapper > div:nth-of-type(3) {
opacity: 0;
}

#ImageWrapper > div:nth-of-type(4) {
opacity: 0;
}

#ImageWrapper > div:nth-of-type(5) {
opacity: 0;
}


#ThumbnailWrapper {
	display: grid; 
	grid-template-columns: auto 1fr;

}


/* Thumbnail Elements */

#GalleryThumbnails {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	grid-auto-rows: auto;
	gap: 5%;
	filter: sepia(0.5) grayscale(0.5);
	justify-content: center;
	opacity: 0.75;
}

#Thumbnail {
	pointer-events: auto;
}


/* Thumbnail Text */
h1 {
	font-family: PowerGrotesk-Medium;
	font-weight: 600;
	font-style: normal;
	font-size: 1rem;
	letter-spacing: 0.5px;
	margin: 0px;

	@media (--bp-mobile) {
		font-size: 1rem;
	}

	@media (--bp-tablet) {
		font-size: 0.8rem;
	}

}

h2 {
	font-family: PowerGrotesk-Light;
	font-weight: 200;
	font-style: italic;
	font-size: 0.8rem;
	letter-spacing: 0.5px;
	margin-top: 4px;

	@media (--bp-mobile) {
		font-size: 0.6rem;
		margin-top: 0px;
	}

	@media (--bp-tablet) {
		font-size: 0.6rem;
		margin-top: 0px;
	}

}

h3 {
	font-family: PowerGrotesk-Light;
	font-weight: 200;
	font-style: normal;
	font-size: 0.8rem;
	text-align: end;
	letter-spacing: 0.5px;
	margin: 0px;

	@media (--bp-mobile) {
		font-size: 0.6rem;
		margin-top: -10px;
	}

	@media (--bp-tablet) {
		font-size: 0.6rem;
		margin-top: -10px;
	}

}

/*Fade */

.fade{
  opacity: 0.22;
  filter: contrast(0.66) sepia(.8) blur(5px) grayscale(0.8);
  transition: all 1s ease;
  transform: translateY(10%);
}

.show {
  opacity: 1;
  filter:  contrast(1) brightness(1) sepia(0) blur(0px) grayscale(0);
  transform: translateY(0);
}
</style>